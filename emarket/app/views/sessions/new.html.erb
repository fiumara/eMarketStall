<!DOCTYPE html>
<html>
<head>
  <title>Login</title>
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>

  <%= stylesheet_link_tag 'application', media: 'all' %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
</head>
<body class="login-body">

  <main class="login-container">
    <h2 class="login-title">Accedi</h2>
  
    <% if flash[:alert] %>
      <p class="alert-message"><%= flash[:alert] %></p>
    <% end %>

    <%= form_with url: login_path, local: true, class: "login-form" do |form| %>

      <div class="form-group">
        <label for="role">Tipo di Utente</label>
        <div class="role-toggle">
          <%= form.radio_button :role, 'acquirente', id: 'role_acquirente', class: "role-option" %>
          <label for="role_acquirente" class="role-label">Acquirente</label>

          <%= form.radio_button :role, 'amministratore', id: 'role_amministratore', class: "role-option" %>
          <label for="role_amministratore" class="role-label">Amministratore</label>
        </div>
      </div>

      <div class="form-group">
        <%= form.label :email %>
        <%= form.text_field :email, autofocus: true, autocomplete: "email", class: "form-control" %>
      </div>
    
      <div class="form-group">
        <%= form.label :password %>
        <%= form.password_field :password, autocomplete: "current-password", class: "form-control" %>
      </div>
    
      <div class="form-group">
        <%= form.submit "Accedi", class: "btn btn-success w-100" %>
      </div>
    <% end %>

    <div class="extra-links">
      <%= link_to 'Password dimenticata?', new_password_reset_path, class: "text-link" %>
      <p class="or-separator">oppure</p>
      <%= link_to 'Accedi con Google', '/auth/google_oauth2', class: "btn btn-outline-primary w-100" %>
      <%= link_to 'Iscriviti', signup_path, class: "btn btn-secondary w-100 mt-2" %>
    </div>
  </main>

</body>
</html>
